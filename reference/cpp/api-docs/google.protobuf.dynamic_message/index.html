<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.111.3"><meta name=robots content="index, follow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Protocol Buffers Documentation</title><meta name=description content="dynamic_message.hdynamic_message.h#include &amp;lt;google/protobuf/dynamic_message.h&amp;gt;
namespace google::protobuf
Defines an implementation of Message which can emulate types which are not known at compile-time. Classes in this fileDynamicMessageFactoryConstructs implementations of Message which can emulate types which are not known at compile-time. DynamicMapSorterHelper for computing a sorted list of map entries via reflection. class DynamicMessageFactory: public MessageFactory#include &amp;lt;google/protobuf/dynamic_message.h&amp;gt;
namespace google::protobuf
Constructs implementations of Message which can emulate types which are not known at compile-time. Sometimes you want to be able to manipulate protocol types that you don't know about at compile time."><meta property="og:title" content><meta property="og:description" content="dynamic_message.hdynamic_message.h#include <google/protobuf/dynamic_message.h>
namespace google::protobuf
Defines an implementation of Message which can emulate types which are not known at compile-time. Classes in this fileDynamicMessageFactoryConstructs implementations of Message which can emulate types which are not known at compile-time. DynamicMapSorterHelper for computing a sorted list of map entries via reflection. class DynamicMessageFactory: public MessageFactory#include <google/protobuf/dynamic_message.h>
namespace google::protobuf
Constructs implementations of Message which can emulate types which are not known at compile-time. Sometimes you want to be able to manipulate protocol types that you don't know about at compile time."><meta property="og:type" content="article"><meta property="og:url" content="https://protobuf.dev/reference/cpp/api-docs/google.protobuf.dynamic_message/"><meta property="article:section" content="reference"><meta property="og:site_name" content="Protocol Buffers Documentation"><meta itemprop=name content><meta itemprop=description content="dynamic_message.hdynamic_message.h#include <google/protobuf/dynamic_message.h>
namespace google::protobuf
Defines an implementation of Message which can emulate types which are not known at compile-time. Classes in this fileDynamicMessageFactoryConstructs implementations of Message which can emulate types which are not known at compile-time. DynamicMapSorterHelper for computing a sorted list of map entries via reflection. class DynamicMessageFactory: public MessageFactory#include <google/protobuf/dynamic_message.h>
namespace google::protobuf
Constructs implementations of Message which can emulate types which are not known at compile-time. Sometimes you want to be able to manipulate protocol types that you don't know about at compile time."><meta itemprop=wordCount content="525"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content><meta name=twitter:description content="dynamic_message.hdynamic_message.h#include <google/protobuf/dynamic_message.h>
namespace google::protobuf
Defines an implementation of Message which can emulate types which are not known at compile-time. Classes in this fileDynamicMessageFactoryConstructs implementations of Message which can emulate types which are not known at compile-time. DynamicMapSorterHelper for computing a sorted list of map entries via reflection. class DynamicMessageFactory: public MessageFactory#include <google/protobuf/dynamic_message.h>
namespace google::protobuf
Constructs implementations of Message which can emulate types which are not known at compile-time. Sometimes you want to be able to manipulate protocol types that you don't know about at compile time."><link rel=preload href=/scss/main.min.43ad6541a45f31cd03dd1066a29ba2595ef582b492c6241a2288367893840e77.css as=style><link href=/scss/main.min.43ad6541a45f31cd03dd1066a29ba2595ef582b492c6241a2288367893840e77.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-5L8P8GRN4Y"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-5L8P8GRN4Y")}</script></head><body class=td-page><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/><span class="navbar-brand__logo navbar-logo"></span><span class=navbar-brand__name>Protocol Buffers Documentation</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"></ul></div><div class="navbar-nav d-none d-lg-block"><div class=td-search><div class=td-search__icon></div><input type=search class="td-search__input form-control td-search-input" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off></div></div></nav></header><div class="container-fluid td-default td-outer"><main role=main class=td-main><html devsite><head><title>dynamic_message.h</title><meta name=project_path value=/protocol-buffers/_project.yaml><meta name=book_path value=/protocol-buffers/_book.yaml></head><body><h1>dynamic_message.h</h1><p><code>#include &lt;google/protobuf/dynamic_message.h><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>Defines an implementation of <a href=google.protobuf.message#Message>Message</a> which can emulate types which are not known at compile-time.</p><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Classes in this file</h3></th></tr><tr><td><div><code><a href=#DynamicMessageFactory>DynamicMessageFactory</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Constructs implementations of <a href=google.protobuf.message#Message>Message</a> which can emulate types which are not known at compile-time.</div></td></tr><tr><td><div><code><a href=#DynamicMapSorter>DynamicMapSorter</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Helper for computing a sorted list of map entries via reflection.</div></td></tr></table><h2 id=DynamicMessageFactory>class DynamicMessageFactory: public <a href=google.protobuf.message#MessageFactory>MessageFactory</a></h2><p><code>#include &lt;<a href=#>google/protobuf/dynamic_message.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>Constructs implementations of <a href=google.protobuf.message#Message>Message</a> which can emulate types which are not known at compile-time.</p><p>Sometimes you want to be able to manipulate protocol types that you don't know about at compile time. It would be nice to be able to construct a <a href=google.protobuf.message#Message>Message</a> object which implements the message type given by any arbitrary <a href=google.protobuf.descriptor#Descriptor>Descriptor</a>. DynamicMessage provides this.</p><p>As it turns out, a DynamicMessage needs to construct extra information about its type in order to operate. Most of this information can be shared between all DynamicMessages of the same type. But, caching this information in some sort of global map would be a bad idea, since the cached information for a particular descriptor could outlive the descriptor itself. To avoid this problem, <a href=google.protobuf.dynamic_message#DynamicMessageFactory>DynamicMessageFactory</a> encapsulates this "cache". All DynamicMessages of the same type created from the same factory will share the same support data. Any Descriptors used with a particular factory must outlive the factory.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=DynamicMessageFactory.DynamicMessageFactory><div style=padding-left:16px;text-indent:-16px><code><b>DynamicMessageFactory</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Construct a <a href=google.protobuf.dynamic_message#DynamicMessageFactory>DynamicMessageFactory</a> that will search for extensions in the <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> in which the extendee is defined.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=DynamicMessageFactory.DynamicMessageFactory><div style=padding-left:16px;text-indent:-16px><code><b>DynamicMessageFactory</b>(const <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> * pool)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Construct a <a href=google.protobuf.dynamic_message#DynamicMessageFactory>DynamicMessageFactory</a> that will search for extensions in the given <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a>. <a href=#DynamicMessageFactory.DynamicMessageFactory.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=DynamicMessageFactory.~DynamicMessageFactory><div style=padding-left:16px;text-indent:-16px><code><b>~DynamicMessageFactory</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=DynamicMessageFactory.SetDelegateToGeneratedFactory><div style=padding-left:16px;text-indent:-16px><code><b>SetDelegateToGeneratedFactory</b>(bool enable)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Call this to tell the <a href=google.protobuf.dynamic_message#DynamicMessageFactory>DynamicMessageFactory</a> that if it is given a <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> d for which: <a href=#DynamicMessageFactory.SetDelegateToGeneratedFactory.details>more...</a></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>implements <a href=google.protobuf.message#MessageFactory>MessageFactory</a></h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>virtual const <a href=google.protobuf.message#Message>Message</a> *</code></td><td style=border-left-width:0 id=DynamicMessageFactory.GetPrototype><div style=padding-left:16px;text-indent:-16px><code><b>GetPrototype</b>(const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> * type)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Given a <a href=google.protobuf.descriptor#Descriptor>Descriptor</a>, constructs the default (prototype) <a href=google.protobuf.message#Message>Message</a> of that type. <a href=#DynamicMessageFactory.GetPrototype.details>more...</a></div></td></tr></table><hr><h3 id=DynamicMessageFactory.DynamicMessageFactory.details><code>DynamicMessageFactory::DynamicMessageFactory(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> * pool)</code></h3><div style=margin-left:16px><p>Construct a <a href=google.protobuf.dynamic_message#DynamicMessageFactory>DynamicMessageFactory</a> that will search for extensions in the given <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a>.</p><p>DEPRECATED: Use CodedInputStream::SetExtensionRegistry() to tell the parser to look for extensions in an alternate pool. However, note that this is almost never what you want to do. Almost all users should use the zero-arg constructor.</p></div><hr><h3 id=DynamicMessageFactory.SetDelegateToGeneratedFactory.details><code>void DynamicMessageFactory::SetDelegateToGeneratedFactory(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool enable)</code></h3><div style=margin-left:16px><p>Call this to tell the <a href=google.protobuf.dynamic_message#DynamicMessageFactory>DynamicMessageFactory</a> that if it is given a <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> d for which:</p><pre>d-&gt;file()-&gt;pool() == DescriptorPool::generated_pool(),</pre><p>then it should delegate to <a href=google.protobuf.message#MessageFactory.generated_factory>MessageFactory::generated_factory()</a> instead of constructing a dynamic implementation of the message. In theory there is no down side to doing this, so it may become the default in the future.</p></div><hr><h3 id=DynamicMessageFactory.GetPrototype.details><code>virtual const <a href=google.protobuf.message#Message>Message</a> * DynamicMessageFactory::GetPrototype(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> * type)</code></h3><div style=margin-left:16px><p>Given a <a href=google.protobuf.descriptor#Descriptor>Descriptor</a>, constructs the default (prototype) <a href=google.protobuf.message#Message>Message</a> of that type.</p><p>You can then call that message's New() method to construct a mutable message of that type.</p><p>Calling this method twice with the same <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> returns the same object. The returned object remains property of the factory and will be destroyed when the factory is destroyed. Also, any objects created by calling the prototype's New() method share some data with the prototype, so these must be destroyed before the <a href=google.protobuf.dynamic_message#DynamicMessageFactory>DynamicMessageFactory</a> is destroyed.</p><p>The given descriptor must outlive the returned message, and hence must outlive the <a href=google.protobuf.dynamic_message#DynamicMessageFactory>DynamicMessageFactory</a>.</p><p>The method is thread-safe.</p></div><h2 id=DynamicMapSorter>class DynamicMapSorter</h2><p><code>#include &lt;<a href=#>google/protobuf/dynamic_message.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>Helper for computing a sorted list of map entries via reflection.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>static std::vector&lt; const <a href=google.protobuf.message#Message>Message</a> * ></code></td><td style=border-left-width:0 id=DynamicMapSorter.Sort><div style=padding-left:16px;text-indent:-16px><code><b>Sort</b>(const <a href=google.protobuf.message#Message>Message</a> & message, int map_size, const <a href=google.protobuf.message#Reflection>Reflection</a> * reflection, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field)</code></div></td></tr></table></body></html></main><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Stack Overflow" aria-label="Stack Overflow"><a class=text-white target=_blank rel=noopener href=https://stackoverflow.com/questions/tagged/protocol-buffers aria-label="Stack Overflow"><i class="fab fa-stack-overflow"></i></a></li></ul><script type=text/javascript id=cookiebanner src=https://cdn.jsdelivr.net/gh/dobarkod/cookie-banner@1.2.2/dist/cookiebanner.min.js data-height=50px data-message="Protobuf.dev uses cookies from Google to deliver and enhance the quality of its services and to analyze traffic." data-bg=#ffb data-fg=#000 data-position=bottom data-padding="10px 16px" data-close-text="OK, got it" data-font-size=18px data-moreinfo=https://policies.google.com/technologies/cookies></script></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/protocolbuffers/protobuf aria-label=GitHub><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Developer mailing list" aria-label="Developer mailing list"><a class=text-white target=_blank rel=noopener href=https://groups.google.com/g/protobuf aria-label="Developer mailing list"><i class="fa fa-envelope"></i></a></li></ul><script type=text/javascript id=cookiebanner src=https://cdn.jsdelivr.net/gh/dobarkod/cookie-banner@1.2.2/dist/cookiebanner.min.js data-height=50px data-message="Protobuf.dev uses cookies from Google to deliver and enhance the quality of its services and to analyze traffic." data-bg=#ffb data-fg=#000 data-position=bottom data-padding="10px 16px" data-close-text="OK, got it" data-font-size=18px data-moreinfo=https://policies.google.com/technologies/cookies></script></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2023 Google LLC All Rights Reserved</small>
<small class=ml-1><a href=https://policies.google.com/privacy target=_blank rel=noopener>Privacy Policy</a></small>
<span class=text-white>Hosted by GitHub Pages.</span> <a href=https://docs.github.com/en/site-policy/privacy-policies/github-privacy-statement target=_blank>GitHub Privacy Statement</a></div></div></div></footer></div><script src=/js/main.min.9bf72cb065abb58e9dd4b5b0081420fe52b7f1d05088aa753cd0a5cff0f04feb.js integrity="sha256-m/cssGWrtY6d1LWwCBQg/lK38dBQiKp1PNClz/DwT+s=" crossorigin=anonymous></script>
<script src=/js/tabpane-persist.js></script></body></html>